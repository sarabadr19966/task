(this["webpackJsonpsara-badr-valify-task"]=this["webpackJsonpsara-badr-valify-task"]||[]).push([[0],{67:function(e,t,a){},82:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a(0),r=a.n(c),s=a(15),i=a.n(s),o=(a(67),a(10)),l=a(13),j=a(12),d=a(110),b=a(124),u=a(121),m=a(123),p=a(112),O=a(37),h=a(44),f=a.n(h),g=a(45),x=a.n(g),y=a(113),I=a(114),N=a(115),v=Object(d.a)({card:{maxWidth:200},icons:{fontSize:60}}),k=function(e){var t=v(),a=Object(c.useRef)(null),r=Object(c.useRef)(null);return Object(n.jsxs)(p.a,{container:!0,justify:"center",spacing:4,className:t.root,children:[Object(n.jsxs)(p.a,{item:!0,children:[Object(n.jsx)("input",{style:{display:"none"},onChange:function(t){return e.onchange(t,"frontImg")},type:"file",ref:r}),Object(n.jsx)(y.a,{className:t.card,onClick:function(){return r.current.click()},children:Object(n.jsx)(I.a,{children:Object(n.jsxs)(N.a,{children:[e.photoUploaded.frontImg?Object(n.jsx)(f.a,{className:t.icons,color:"primary"}):Object(n.jsx)(x.a,{className:t.icons,color:"primary"}),Object(n.jsx)(O.a,{variant:"body2",color:"textSecondary",component:"p",children:"Add Front Image Of  your National ID"})]})})})]}),Object(n.jsxs)(p.a,{item:!0,children:[Object(n.jsx)("input",{style:{display:"none"},onChange:function(t){return e.onchange(t,"backImg")},type:"file",ref:a}),Object(n.jsx)(y.a,{className:t.card,onClick:function(){return a.current.click()},children:Object(n.jsx)(I.a,{children:Object(n.jsxs)(N.a,{children:[e.photoUploaded.backImg?Object(n.jsx)(f.a,{className:t.icons,color:"primary"}):Object(n.jsx)(x.a,{className:t.icons,color:"primary"}),Object(n.jsx)(O.a,{variant:"body2",color:"textSecondary",component:"p",children:"Add Back Image Of  Your National ID"})]})})})]})]})},_=a(56),S=a(117),w=a(116),C=a(53),A=a.n(C),T=a(52),B=a.n(T),D=a(54),E=a.n(D),F=function(e){var t=Object(c.useState)(!1),a=Object(j.a)(t,2),r=a[0],s=a[1],i=Object(c.useState)(!0),l=Object(j.a)(i,2),d=l[0],b=l[1],u=Object(c.useRef)(null),m=Object(c.useRef)(null);Object(c.useEffect)((function(){var t=document.getElementById("webcam"),a=document.getElementById("canvas");u.current=new _.a(t,"user",a),e.capture(!0)}),[]);var p=function(e){s(e)};Object(c.useEffect)((function(){u.current&&r?u.current.start():u.current&&!r&&u.current.stop()}),[r]);return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("div",{children:[Object(n.jsx)("video",Object(o.a)({id:"webcam",autoPlay:!0,playsInline:!0,width:"400 ",height:"300"},(!r||!d)&&{style:{display:"none"}})),Object(n.jsx)("canvas",Object(o.a)({id:"canvas"},d&&{style:{display:"none"}}))]}),r||!d?Object(n.jsxs)("div",{children:[Object(n.jsx)(w.a,{disabled:d,onClick:function(){b(!d),s(!0),e.capture(!d)},color:"primary","aria-label":"upload picture",component:"span",children:Object(n.jsx)(B.a,{})}),Object(n.jsx)(w.a,{disabled:!d,onClick:function(){var e=u.current.snap();m.current.href=e||"",b(!d)},color:"primary","aria-label":"upload picture",component:"span",children:Object(n.jsx)(A.a,{})}),Object(n.jsx)(w.a,{disabled:d,onClick:function(){s(!1),e.capture(d)},color:"primary","aria-label":"upload picture",component:"span",children:Object(n.jsx)(E.a,{})})]}):null,Object(n.jsx)("a",{id:"dowload-photo",href:"",ref:m}),Object(n.jsxs)("div",{children:[Object(n.jsx)(S.a,{onClick:function(){return p(!0)},children:" Open Camera"}),Object(n.jsx)(S.a,{onClick:function(){return p(!1)},children:" Close Camera"})]})]})},P=a(118),R=a(120),U=a(119),W=a(34),L=a.n(W),M=a(84),z=a(55),J=a.n(z),K=Object(d.a)((function(e){return{paper:Object(l.a)({padding:"20px"},e.breakpoints.up("md"),{width:"80%",margin:"0 auto"})}})),G=function(e){var t=K();return Object(n.jsxs)(M.a,{elevation:2,className:t.paper,children:[Object(n.jsxs)(O.a,{variant:"h6",children:[Object(n.jsx)(J.a,{color:"secondary",style:{marginRight:10}})," ",e.error.msg]}),Object(n.jsx)(S.a,{onClick:e.tryAgain,variant:"outlined",color:"secondary",style:{marginTop:20},children:"Try Again"})]})},Y=Object(d.a)((function(e){return{root:{maxWidth:360,backgroundColor:e.palette.background.paper},listItem:Object(l.a)({textAlign:"center"},e.breakpoints.up("md"),{textAlign:"left"}),paper:Object(l.a)({},e.breakpoints.up("md"),{width:"80%",margin:"0 auto"})}})),q=function(e){var t=Y();return e.loading?Object(n.jsx)(L.a,{loading:e.loading}):Object(n.jsx)(n.Fragment,{children:e.error.err?Object(n.jsx)(G,{error:e.error,tryAgain:e.tryAgain}):Object(n.jsx)(M.a,{elevation:2,className:t.paper,children:Object(n.jsxs)(p.a,{container:!0,justify:"space-around",children:[Object(n.jsx)(p.a,{item:!0,xs:12,sm:6,lg:4,children:Object(n.jsxs)(P.a,{className:t.root,children:[Object(n.jsxs)(U.a,{className:t.listItem,children:["  ",Object(n.jsx)(R.a,{primary:"FirstName",secondary:e.clientInfo.first_name})," "]}),Object(n.jsxs)(U.a,{className:t.listItem,children:["  ",Object(n.jsx)(R.a,{primary:"FullName",secondary:e.clientInfo.full_name})," "]}),Object(n.jsxs)(U.a,{className:t.listItem,children:["  ",Object(n.jsx)(R.a,{primary:"Gender",secondary:e.clientInfo.gender})," "]}),Object(n.jsxs)(U.a,{className:t.listItem,children:["  ",Object(n.jsx)(R.a,{primary:"Religion",secondary:e.clientInfo.religion})," "]}),Object(n.jsxs)(U.a,{className:t.listItem,children:["  ",Object(n.jsx)(R.a,{primary:"Marital Status",secondary:e.clientInfo.marital_status})," "]}),Object(n.jsxs)(U.a,{className:t.listItem,children:["  ",Object(n.jsx)(R.a,{primary:"Husband Name",secondary:e.clientInfo.husband_name?e.clientInfo.husband_name:"\u0644\u0627 \u064a\u0648\u062c\u062f"})," "]}),Object(n.jsxs)(U.a,{className:t.listItem,children:["  ",Object(n.jsx)(R.a,{primary:"Profession",secondary:e.clientInfo.profession})," "]})]})}),Object(n.jsx)(p.a,{item:!0,xs:12,sm:6,lg:4,children:Object(n.jsxs)(P.a,{className:t.root,children:[Object(n.jsxs)(U.a,{className:t.listItem,children:["  ",Object(n.jsx)(R.a,{primary:"Street",secondary:e.clientInfo.street})," "]}),Object(n.jsxs)(U.a,{className:t.listItem,children:["  ",Object(n.jsx)(R.a,{primary:"Area",secondary:e.clientInfo.area})," "]}),Object(n.jsxs)(U.a,{className:t.listItem,children:["  ",Object(n.jsx)(R.a,{primary:"Front NID",secondary:e.clientInfo.front_nid})," "]}),Object(n.jsxs)(U.a,{className:t.listItem,children:["  ",Object(n.jsx)(R.a,{primary:"Back NID",secondary:e.clientInfo.back_nid})," "]}),Object(n.jsxs)(U.a,{className:t.listItem,children:["  ",Object(n.jsx)(R.a,{primary:"Serial Number",secondary:e.clientInfo.serial_number})," "]}),Object(n.jsxs)(U.a,{className:t.listItem,children:["  ",Object(n.jsx)(R.a,{primary:"Release Date",secondary:e.clientInfo.release_date})," "]}),Object(n.jsxs)(U.a,{className:t.listItem,children:["  ",Object(n.jsx)(R.a,{primary:"Expiration",secondary:e.clientInfo.expiration})," "]})]})})]})})})},H=function(e){return Object(n.jsx)(S.a,Object(o.a)(Object(o.a)({variant:"contained",color:"primary",style:{width:"200px"},onClick:e.handleNext,disabled:e.loading||!(e.photoUploaded.frontImg&&e.photoUploaded.backImg)||e.captured},(e.loading||e.error.err||e.activeStep===e.steps.length)&&{style:{display:"none"}}),{},{children:function(){switch(e.activeStep){case 0:return"Upload";case 1:return"confirm";case 2:return"Send"}}()}))},Q=function(e){return e.loading?Object(n.jsx)(L.a,{loading:e.loading}):Object(n.jsx)("div",{children:e.similar?Object(n.jsx)("h1",{children:"your Account created sucessfully"}):Object(n.jsx)(G,{error:e.error,tryAgain:e.tryAgain})})},X=Object(d.a)((function(e){return{root:{width:"100%"},backButton:{marginRight:e.spacing(1)},instructions:{marginTop:e.spacing(1),marginBottom:e.spacing(1)}}})),Z=function(){var e=X(),t=Object(c.useState)(0),a=Object(j.a)(t,2),r=a[0],s=a[1],i=Object(c.useState)({frontImg:"",backImg:""}),d=Object(j.a)(i,2),O=d[0],h=d[1],f=Object(c.useState)({}),g=Object(j.a)(f,2),x=g[0],y=g[1],I=Object(c.useState)(!1),N=Object(j.a)(I,2),v=N[0],_=N[1],S=Object(c.useState)(!1),w=Object(j.a)(S,2),C=w[0],A=w[1],T=Object(c.useState)({err:!1,msg:""}),B=Object(j.a)(T,2),D=B[0],E=B[1],P=Object(c.useState)(!1),R=Object(j.a)(P,2),U=R[0],W=R[1],L=function(e,t){var a=e.target.files[0],n=new FileReader;n.onload=function(){var e=n.result.replace(/^data:.+;base64,/,"");h((function(a){return Object(o.a)(Object(o.a)({},a),{},Object(l.a)({},t,e))}))},n.readAsDataURL(a)},M=["Upload Image Of Your Egyptian National ID","Confirm Your Information","Take Selfie Image From The Camera"],z=function(){var e=new URLSearchParams,t={username:"task_sara_badr",password:"rMrO7xY%Uc2iO5z",client_id:"SO8wowNXXtluOMglTq20gUaDWMOmMSxJ5uKWueSD",client_secret:"HA9bg5kZBlGgjNa4eD6t0ZGK8KNLIbh4oqtmJ1qPFNDQjPMSyEftmcWWaQ4p2vPrrC81opLE2oBrWKYlKWEcnKG0zZg4ajuc7LlX4QepgxEp4zjyOr6sEd0coMJ9y6ze",grant_type:"password"};for(var a in t)e.append(a,t[a]);return fetch("https://www.valifystage.com/api/o/token/",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:e}).then((function(e){return e.json()})).then((function(e){return e.access_token})).catch((function(e){return console.log(e)}))},J=function(){_(!0),z().then((function(e){var t={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+e},body:JSON.stringify({front_img:O.frontImg,back_img:O.backImg,is_back_cropped:"0",is_front_cropped:"0",front_label:"EGP_NID_FRONT",back_label:"EGP_NID_BACK",bundle_key:"6bee263097c64a0788538e051300573f"})};fetch("https://www.valifystage.com/api/v1/ocr/egp_nid_ocr/",t).then((function(e){e.ok?e.json().then((function(e){_(!1),y(e.result)})):e.json().then((function(e){_(!1),E({err:!0,msg:e.message})}))}))}))},K=function(){_(!0);var e=document.querySelector("#dowload-photo").getAttribute("href");e=e.replace(/^data:.+;base64,/,""),z().then((function(t){var a={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+t},body:JSON.stringify({first_img:e,second_img:O.frontImg,bundle_key:"6bee263097c64a0788538e051300573f"})};fetch("https://www.valifystage.com/api/v1/recognition/facial_recognition/",a).then((function(e){e.ok?e.json().then((function(e){_(!1),A(e.is_similar)})):e.json().then((function(e){_(!1),E({err:!0,msg:e.message})}))}))}))},G=function(){1===r&&h(""),s(r-1),E({err:!1})},Y=function(e){W(e)};return Object(n.jsxs)(p.a,{container:!0,direction:"column",className:e.root,children:[Object(n.jsx)(p.a,{item:!0,style:{marginBottom:50},children:Object(n.jsx)(b.a,{activeStep:r,alternativeLabel:!0,className:e.stepper,children:M.map((function(e){return Object(n.jsx)(u.a,{children:Object(n.jsx)(m.a,{children:e})},e)}))})}),r===M.length?Object(n.jsx)(Q,{loading:v,similar:C,tryAgain:G,error:D}):function(e){switch(e){case 0:return Object(n.jsx)(k,{onchange:L,photoUploaded:O});case 1:return Object(n.jsx)(q,{clientInfo:x,loading:v,error:D,tryAgain:G});case 2:return Object(n.jsx)(F,{capture:Y})}}(r),Object(n.jsx)(p.a,{item:!0,style:{marginTop:70},children:Object(n.jsx)(H,{handleNext:function(){switch(s((function(e){return e+1})),r){case 0:J();break;case 2:K()}},activeStep:r,loading:v,photoUploaded:O,captured:U,error:D,steps:M})})]})},V=a(122),$=Object(d.a)((function(e){return{root:Object(o.a)(Object(o.a)({},e.typography.button),{},{backgroundColor:e.palette.background.paper,padding:e.spacing(1)}),container:{textAlign:"center",margin:"0 auto",paddingTop:"100px",paddingBottom:"100px",minHeight:"100vh"}}}));var ee=function(){var e=$();return Object(n.jsxs)(V.a,{maxWidth:"md",className:e.container,children:[Object(n.jsx)(O.a,{className:e.root,children:"Create Your Bank Account"}),Object(n.jsx)(Z,{})]})},te=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,126)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;a(e),n(e),c(e),r(e),s(e)}))};i.a.render(Object(n.jsx)(r.a.StrictMode,{children:Object(n.jsx)(ee,{})}),document.getElementById("root")),te()}},[[82,1,2]]]);
//# sourceMappingURL=main.b5b6f2be.chunk.js.map